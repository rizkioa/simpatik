{% extends "front-end/base.html" %}
{% load i18n admin_static staticfiles widgets %}
{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'scripts/js/vendor/chosen/chosen.css' %}">
<link rel="stylesheet" href="{% static 'scripts/js/vendor/toastr/toastr.min.css' %}">
<!-- <link rel="stylesheet" href="{% static 'scripts/js/vendor/loadmask/jquery.loadmask.css' %}"> -->
<link rel="stylesheet" href="{% static 'scripts/js/vendor/datetimepicker/css/bootstrap-datetimepicker.min.css'  %}">
<link rel="stylesheet" href="{% static 'scripts/js/mloading/jquery.mloading.css' %}">
<link rel="stylesheet" href="{% static 'scripts/js/vendor/alert/sweetalert.css' %}">
<style type="text/css">
  @media only screen and (max-width: 1280px){
    .hidden_title{
       display: none !important;
    }
    .tab-wizard .nav-tabs > li.active > a, .tab-wizard .nav-tabs > li.active > a:hover {
      padding-bottom: 24px
    }
    .tab-wizard .nav-tabs > li.active ~ li > a, .tab-wizard .nav-tabs > li.active ~ li > a:hover {
      padding-bottom: 24px;
    }
  }
  @media only screen and (max-width: 844px){
    .hidden_title{
      display: block !important;
    }
  }

  hr.style14 { 
    border: 0; 
    height: 1px; 
    background-image: -webkit-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
    background-image: -moz-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
    background-image: -ms-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
    background-image: -o-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0); 
  }
  .tab-wizard .nav-tabs > li > a, .tab-wizard .nav-tabs > li > a:hover, .tab-wizard .nav-tabs > li > a:focus {
    background-color: #22beef;
    color: aliceblue;
  }
  .tab-wizard .nav-tabs > li.active ~ li > a, .tab-wizard .nav-tabs > li.active ~ li > a:hover {
    background-color: #616f77;
  }
  .tab-wizard .nav-tabs > li:before {
    background-color: #333;
  }
  /*@media screen and (max-width: 767px)*/
  .table-responsive {
      width: 100%;
      margin-bottom: 15px;
      overflow-y: hidden;
      -ms-overflow-style: -ms-autohiding-scrollbar;
      border: 1px solid #ddd;
  }
</style>
{% endblock %}
{% block section %}
<div class="pageheader">
    <h2>TDP - PERSEKUTUAN KOMANDITER (CV)
    <span>Berikut adalah info pendaftaran perizinan TDP Kabupaten Kediri.</span>
  </h2>
  <div class="page-bar">
    <ul class="page-breadcrumb">
      <li>
        <a href="{% url 'frontindex' %}"><i class="fa fa-home"></i> Beranda</a>
      </li>
      <li>
        <a href="{% url 'layanan' %}"><i class="fa fa-sign-in"></i> Pendaftaran Perizinan Daerah</a>
      </li>
      <li>
        <a href="#"> TDP - PERSEKUTUAN KOMANDITER (CV)</a>
      </li>
      <li>
        <a href="#">Formulir TDP - PERSEKUTUAN KOMANDITER (CV)</a>
      </li>
    </ul>
  </div>
</div>
  
<div id="rootwizard" class="tab-container tab-wizard">
  <ul class="nav nav-tabs nav-justified">
    <li><a disabled href="#tab1" data-toggle="tab"><i class="hidden_title">STAP #1</i> <span class="badge badge-default pull-right wizard-step">1</span></a></li>
    <li><a disabled href="#tab2" data-toggle="tab"><i class="hidden_title">STAP #2</i><span class="badge badge-default pull-right wizard-step">2</span></a></li>
    <li><a disabled href="#tab3" data-toggle="tab"><i class="hidden_title">STAP #3</i><span class="badge badge-default pull-right wizard-step">3</span></a></li>
    <li><a disabled href="#tab4" data-toggle="tab"><i class="hidden_title">STAP #4 </i><span class="badge badge-default pull-right wizard-step">4</span></a></li>
    <li><a disabled href="#tab5" data-toggle="tab"><i class="hidden_title">STAP #5</i><span class="badge badge-default pull-right wizard-step">5</span></a></li>
    <li><a disabled href="#tab6" data-toggle="tab"><i class="hidden_title">STAP #6</i><span class="badge badge-default pull-right wizard-step">6</span></a></li>
    <li><a disabled href="#tab7" data-toggle="tab"><i class="hidden_title">STAP #7</i><span class="badge badge-default pull-right wizard-step">7</span></a></li>
    <li><a disabled href="#tab8" data-toggle="tab"><i class="hidden_title">STAP #8</i><span class="badge badge-default pull-right wizard-step">8</span></a></li>
    <li><a disabled href="#tab9" data-toggle="tab"><i class="hidden_title">STAP #9</i><span class="badge badge-default pull-right wizard-step">9</span></a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane" id="tab1"> 
      <!-- Identitas pemohon --> 
      {% include 'front-end/include/pemohon/identitas_pemohon.html' %}
    </div>

    <div class="tab-pane" id="tab2">
      <!-- Identitas perusahaan -->
      {% include 'front-end/include/formulir_siup/identitas_perusahaan.html' %}
    </div>
      <!-- Data Umum Perusahaan -->
    <div class="tab-pane" id="tab3">
      {% include 'front-end/include/formulir_tdp_cv/data_umum_perusahaan.html' %}
    </div>
    <!-- Data kegiatan Perusahaan -->
    <div class="tab-pane" id="tab4">
      {% include 'front-end/include/formulir_tdp_pt/data_kegiatan_perusahaan.html' %}
    </div>
    <!-- Legalitas Perusahaan -->
    <div class="tab-pane" id="tab5">
      {% include 'front-end/include/formulir_siup/legalitas_perusahaan.html' %}
    </div>
    <!-- Izin Lain -->
    <div class="tab-pane" id="tab6">
      {% include 'front-end/include/formulir_tdp_pt/izin_lain.html' %}
    </div>
    <!-- Data Lain Perusahaan -->
    <div class="tab-pane" id="tab7">
      {% include 'front-end/include/formulir_tdp_pt/data_lain_perusahaan.html' %}
    </div>
    <!-- Upload Dokumen Persyaratan -->
    <div class="tab-pane" id="tab8">
      {% include 'front-end/include/formulir_tdp_cv/upload_dokumen_persyaratan.html' %}
    </div>

    <div class="tab-pane" id="tab9">
      {% include 'front-end/include/formulir_tdp_cv/konfirmasi.html' %}
    </div>

    <ul class="pager wizard">
      <li class="previous"><a class="btn btn-default">Kembali</a></li>
      <li class="next" id="next"><a onclick="next_tab(this)" class="btn btn-default">Selanjutnya</a></li>
      <li class="next finish" style="display:none;">
        <button id="alert" onclick="next_tab(this)"  value="Submit" type="submit" class="btn btn-success pull-right">
          <i class="fa fa-arrow-right"></i>
          <span>Selesai</span>
        </button>
      </li>
    </ul>
  </div>
  <br>
  <br>
  <br>
</div>
{% endblock %}

{% block extratools %}
{{ block.super }}
<script src="{% static 'scripts/js/vendor/chosen/chosen.jquery.min.js' %}"></script>
<script src="{% static 'scripts/js/vendor/parsley/parsley.js' %}"></script>
<script src="{% static 'scripts/js/vendor/form-wizard/jquery.bootstrap.wizard.min.js' %}"></script>
<script src="{% static 'scripts/js/vendor/toastr/toastr.min.js' %}"></script>
<!-- <script src="{% static 'scripts/js/vendor/loadmask/jquery.loadmask.js' %}"></script> -->
<script src="{% static 'scripts/js/vendor/filestyle/bootstrap-filestyle.min.js' %}"></script>
<script src="{% static 'scripts/js/vendor/daterangepicker/moment.js' %}"></script>
<script src="{% static 'scripts/js/vendor/datetimepicker/js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'scripts/js/vendor/jquery/jquery.form.js' %}"></script>
<script src="{% static 'scripts/js/vendor/validation/jquery.maskedinput.js' %}"></script>
<script src="{% static 'scripts/js/jquery.mask.js' %}"></script>
<script src="{% static 'scripts/js/vendor/jquery/jquery.cookie.js' %}"></script>
<script src="{% static 'scripts/js/vendor/alert/sweetalert-dev.js' %}"></script>
<script src="{% static 'scripts/js/vendor/touchspin/jquery.bootstrap-touchspin.min.js' %}"></script>
<script src="{% static 'scripts/js/mloading/jquery.mloading.js' %}"></script>
<script src="{% static 'scripts/js/form/pemohon.js' %}"></script>
<script src="{% static 'scripts/js/form/perusahaan.js' %}"></script>
<script src="{% static 'scripts/js/form/validasi.js' %}"></script>
<script src="{% static 'scripts/js/formAjax/form_ajax_tdp_cv.js' %}"></script>
<script>
    $(window).load(function(){

        $('#rootwizard').bootstrapWizard({
            onTabShow: function(tab, navigation, index) {
                var $total = navigation.find('li').length;
                var $current = index+1;
                if ($current == 2){
                  load_kecamatan1(1083);
                  if ($.cookie('npwp_perusahaan') !== '0'){
                    $('#id_npwp_perusahaan').val($.cookie('npwp_perusahaan'))
                    setTimeout(function(){
                      load_perusahaan_a($.cookie('npwp_perusahaan'))
                    }, 1000);
                  }
                }
                if($current === 3){
                  perusahaan_induk = $.cookie('npwp_perusahaan_induk')
                  if (perusahaan_induk !== '0'){
                    load_provinsi_(1, '#id_provinsi-3')
                    load_perusahaan_induk($.cookie('npwp_perusahaan_induk'))
                    setTimeout(function(){
                      load_data_umum_perusahaan($.cookie('id_pengajuan'))
                    }, 1000);
                  }
                }
                if ($current === 4){
                  load_data_kegiatan_perusahaan($.cookie('id_pengajuan'))
                }
                if ($current ===6){
                  load_data_izin_lain($.cookie('id_pengajuan'))
                }
                if ($current == 7) {
                  load_provinsi_(1, '#id_provinsi-5')
                  load_data_pemegang_saham($.cookie('id_pengajuan'))
                  load_data_pimpinan_perusahaan($.cookie('id_pengajuan'))
                  load_data_perusahaan_cabang($.cookie('id_pengajuan'))
                }
                if($current >= $total) {
                    $('#rootwizard').find('.pager .next').hide();
                    $('#rootwizard').find('.pager .finish').show();
                    $('#rootwizard').find('.pager .finish').removeClass('disabled');
                } else {
                    $('#rootwizard').find('.pager .next').show();
                    $('#rootwizard').find('.pager .finish').hide();
                }

            },

            onNext: function(tab, navigation, index) {
              return false;

            },

            onTabClick: function(tab, navigation, index) {
              return true;
            }

        });
    });

    function next_tab(btn){
      var index = $('#rootwizard').bootstrapWizard('currentIndex')+1;
      var frm = $('form[name="step'+ index +'"]');
      frm.parsley().validate();
        if (frm.parsley().isValid()) {
          $(".tab-content").mLoading();
          $(btn).attr('disabled', 'disabled')
          $.ajax({
            type: frm.attr('method'),
            url: frm.attr('action'),
            data: frm.serialize(),
            success: function (response){
              respon = $.parseJSON(response)
                $(btn).removeAttr('disabled')
                if(respon.success){
                  toastr["success"](respon.pesan)
                  tab_index = '#rootwizard a[href="#tab'+(index+1)+'"]'
                  $(tab_index).tab('show')
                }
                else{
                  var a = Object.keys(respon);
                  for (var i = 0; i < a.length; i++){
                    var c = a[i].replace("_", " ").charAt(0).toUpperCase()
                    var field = c + a[i].replace("_", " ").slice(1)
                    toastr["error"](field+" "+respon[a[i]][0]['message'])
                    $("#"+a[i]+"").addClass("has-error");
                    $("#id_"+a[i]+"_").addClass("has-error");
                  }
                }
                $(".tab-content").mLoading('hide');
            },
            error: function(response){
              $(".tab-content").mLoading('hide');
              $(btn).removeAttr('disabled')
              toastr["error"]("Terjadi kesalahan pada koneksi server.")
            }
        });
      }
    };

    $(document).ready(function() {
      window.onbeforeunload = function ref() {
        var r = confirm( "Do you want to leave?" );
        if (r == true) {
            
        }
        else {
            return false;
        }
      };

      var pathname = "/";

      if ($.cookie('id_pengajuan') === undefined){
        $.cookie('id_pengajuan', "0", {path:pathname});
      }
      if ($.cookie('id_pemohon') === undefined){
        $.cookie('id_pemohon', "0", {path:pathname});
      }
      if ($.cookie('id_perusahaan') === undefined){
        $.cookie('id_perusahaan', "0", {path:pathname});
      }

      $( "#alert" ).prop( "disabled", true );
      $('#checkbox_tdp_done').change(function() {
        if ($(this).is(':checked')) {
          $( "#alert" ).prop( "disabled", false );
          window.onbeforeunload = null;
        }
        else{
          $( "#alert" ).prop( "disabled", true );
        }
      });

      pengajuan = $.cookie('id_pengajuan')
      if (pengajuan !== '0'){
        $('#id_ktp').val('{{ktp}}');
        $('#id_paspor').val('{{paspor}}');
        load_pemohon('{{ktp}}');

        $('#id_jenis_pengajuan').val('{{pengajuan_.jenis_permohonan.id}}').prop('selected',true).trigger("chosen:updated");
        $('#id_jenis_pemohon').val('{{pengajuan_.pemohon.jenis_pemohon.id}}').prop('selected',true).trigger("chosen:updated");
        $('#id_npwp_perusahaan_induk').val('{{pengajuan_.perusahaan.perusahaan_induk.npwp}}');

        $.cookie('id_pengajuan', '{{pengajuan_id}}' , { path: pathname })
        if ('{{ pengajuan_.pemohon }}' !== 'None'){
          $.cookie('nomor_ktp', '{{ktp}}' , { path: pathname })
          $.cookie('nomor_paspor', '{{paspor}}' , { path: pathname})
          $.cookie('id_pemohon', '{{ pengajuan_.pemohon.id }}' , { path: pathname})
        }
        else{
          $.cookie('nomor_ktp', '0' , { path: pathname })
          $.cookie('nomor_paspor', '0' , { path: pathname})
          $.cookie('id_pemohon', '0' , { path: pathname})
        }
        
        if ('{{ pengajuan_.perusahaan }}' !== 'None'){
          $.cookie('id_perusahaan', '{{ pengajuan_.perusahaan.id  }}' , { path: pathname})
          $.cookie('npwp_perusahaan', '{{ pengajuan_.perusahaan.npwp  }}' , { path: pathname })
        }
        else{
          $.cookie('id_perusahaan', '0' , { path: pathname})
          $.cookie('npwp_perusahaan', '0' , { path: pathname })
        }
        
        if ('{{ pengajuan_.perusahaan.perusahaan_induk }}' !== 'None'){
          $.cookie('id_perusahaan_induk', '{{ pengajuan_.perusahaan.perusahaan_induk.id  }}' , { path: pathname})
          $.cookie('npwp_perusahaan_induk', '{{ pengajuan_.perusahaan.perusahaan_induk.npwp  }}' , { path: pathname})
        }
        else{
          $.cookie('id_perusahaan_induk', '0' , { path: pathname})
          $.cookie('npwp_perusahaan_induk', '0' , { path: pathname})
        }
      }
    });


    function jumlah_karyawan(){
      var wni = parseInt($('#id_jumlah_karyawan_wni').val());
      var wna = parseInt($('#id_jumlah_karyawan_wna').val());
      if (wni === ''){
        wni = 0;
      }
      if (wna === ''){
        wna = 0;
      }
      var total = wni+wna;
      $('#id_total_wni_wna').val(total);
    }

    function total_n_a(){
      var nasional = parseFloat($('#id_presentase_kandungan_produk_lokal').val())
      var asing = parseFloat($('#id_presentase_kandungan_produk_import').val())
      var total_a_n = nasional+asing
      if (total_a_n.toFixed(2) > 100.00){
        $('.presentase').addClass('has-error')
        $('<div class="form-group"><span class="col-sm-12 help-block mb-0 error-presentase"><center><font color="red">Jumlah persen kandungan produk lokal dan import tidak boleh melebihi 100%.</font></center></span></div>').insertAfter('#presentase')
      }
      else{
        $('.presentase').removeClass('has-error')
        $('.error-presentase').remove()
      }
    }

    $('.rupiah').mask("000.000.000.000.000.000.000.000.000",{reverse:true});

    document.querySelector('#alert').onclick = function(){
      var pengajuan_cookie = $.cookie('id_pengajuan'); 
      var pemohon_cookie = $.cookie('id_pemohon'); 
      var perusahaan_cookie = $.cookie('id_perusahaan'); 
      if (pengajuan_cookie === ""){
        toastr["warning"]("Terjadi kesalahan, anda belum mengisi form pengajuan.")
        tab_index = '#rootwizard a[href="#tab'+(1)+'"]';
        $(tab_index).tab('show');
      }
      else if(pemohon_cookie === ""){
        toastr["warning"]("Terjadi kesalahan, anda belum mengisi form pemohon.")
        tab_index = '#rootwizard a[href="#tab'+(1)+'"]';
        $(tab_index).tab('show');
      }
      else if(perusahaan_cookie === ""){
        toastr["warning"]("Terjadi kesalahan, anda belum mengisi form perusahaan.")
        tab_index = '#rootwizard a[href="#tab'+(2)+'"]';
        $(tab_index).tab('show');
      }
      else{
        swal({
          showConfirmButton: false,
          type: 'success',
          title: 'Pendaftaran Berhasil Tersimpan',
          timer: 2000
        })
        pengajuan_id = $.cookie('id_pengajuan')
        if ($.cookie('id_pengajuan') === undefined){
          pengajuan_id = 0
        }
        window.location.replace(__base_url__+'/layanan/tdp-pt/formulir/cetak/'+pengajuan_id);
        $.ajax({
          url: '{% url 'tdp_pt_done' %}',
          success: function(response) {
            respon = $.parseJSON(response)
            if(respon.success){
              toastr["success"](respon.pesan)
              
            }
          }
        });
      }
    };

    function load_perusahaan_induk(npwp_){
      if (npwp_ !== ""){
        $(".tab-content").mLoading();
        $.ajax({
          type: 'GET',
          url: __base_url__+'/load-perusahaan/'+npwp_,
          success: function (data) {
              $(".tab-content").mLoading('hide');
              respon_induk = $.parseJSON(data)
              if(respon_induk.success){
                $('#switch_data_umum_kantor_cabang_disabled').attr('checked', 1)
                $('.data_umum_kantor_cabang').prop('disabled', false).trigger("chosen:updated");
                
                $('#id_nama_perusahaan_induk').val(respon_induk.data.nama_perusahaan);
                $('#id_alamat_perusahaan_induk').val(respon_induk.data.alamat_perusahaan);
                $('#no_tdp_induk').val(respon_induk.data.nomor_tdp)
                load_kabupaten_(respon_induk.data.provinsi, '#id_kabupaten-3')
                load_kecamatan_(respon_induk.data.kabupaten, '#id_kecamatan-3')
                load_desa_(respon_induk.data.kecamatan, '#id_desa-3')
                setTimeout(function(){
                  $('#id_provinsi-3').val(respon_induk.data.provinsi).prop('selected',true).trigger("chosen:updated");
                  $('#id_kabupaten-3').val(respon_induk.data.kabupaten).prop('selected',true).trigger("chosen:updated");
                  $('#id_kecamatan-3').val(respon_induk.data.kecamatan).prop('selected',true).trigger("chosen:updated");
                  $('#id_desa-3').val(respon_induk.data.desa).prop('selected',true).trigger("chosen:updated");
                }, 1000);
              }
              else{
                // $('#switch_data_umum_kantor_cabang_disabled').attr('checked', false);
                // $('.data_umum_kantor_cabang').prop('disabled', true).trigger("chosen:updated");
                // $('#id_nama_perusahaan_induk').val("");
                // $('#id_alamat_perusahaan_induk').val("");
                // $('#id_provinsi3').val("").prop('selected',true).trigger("chosen:updated");
                // $('#id_kabupaten3').val("").prop('selected',true).trigger("chosen:updated");
                // $('#id_kecamatan3').val("").prop('selected',true).trigger("chosen:updated");
                // $('#id_desa3').val("").prop('selected',true).trigger("chosen:updated");
              }
            },
            error: function(data) {
              toastr["error"]("Terjadi kesalahan pada koneksi server. Coba reload ulang browser Anda. ")
              $(".tab-content").mLoading('hide');
            }
        });
      }
    }

    function load_data_umum_perusahaan(pengajuan_id){
      if (pengajuan_id !== ""){
        $(".tab-content").mLoading();
        $.ajax({
          type: 'GET',
          url: __base_url__+'/ajax-load-data-umum-perusahaan-tdp/'+pengajuan_id,
          success: function (data) {
              respon_data_umum = $.parseJSON(data)
              if(respon_data_umum.success){
                $('#id_status_perusahaan').val(respon_data_umum.data.status_perusahaan).prop('selected',true).trigger("chosen:updated");
                // bagian unit produksi
                if (respon_data_umum.data.alamat_unit_produksi !== ""){
                  $('.stap3_bagian_unit').prop('disabled', false).trigger("chosen:updated");
                  $('#switch_stap3_bagi_unit_disabled').attr('checked', 1)
                  $('#id_alamat_unit_produksi').val(respon_data_umum.data.alamat_unit_produksi);
                  load_provinsi_(1, '#id_provinsi-4');
                  setTimeout(function(){
                    $('#id_provinsi-4').val(respon_data_umum.data.provinsi).prop('disabled', false).trigger("chosen:updated");
                  }, 1000);
                  load_kabupaten_(respon_data_umum.data.provinsi, '#id_kabupaten-4');
                  setTimeout(function(){
                    $('#id_kabupaten-4').val(respon_data_umum.data.kabupaten).prop('disabled', false).trigger("chosen:updated");
                  }, 1000);
                  load_kecamatan_(respon_data_umum.data.kabupaten, '#id_kecamatan-4');
                  setTimeout(function(){
                    $('#id_kecamatan-4').val(respon_data_umum.data.kecamatan).prop('disabled', false).trigger("chosen:updated");
                  }, 1000);
                  load_desa_(respon_data_umum.data.kecamatan, '#id_desa-4');
                  setTimeout(function(){
                    $('#id_desa-4').val(respon_data_umum.data.desa).prop('disabled', false).trigger("chosen:updated");
                  }, 1000);
                }

                $('#id_jumlah_bank').val(respon_data_umum.data.jumlah_bank);
                $('#id_nasabah_utama_bank_1').val(respon_data_umum.data.nasabah_utama_bank_1);
                $('#id_nasabah_utama_bank_2').val(respon_data_umum.data.nasabah_utama_bank_2);
                $('#id_jenis_penanaman_modal').val(respon_data_umum.data.jenis_penanaman_modal).prop('disabled', false).trigger("chosen:updated");
                $('#id_tanggal_pendirian').val(respon_data_umum.data.tanggal_pendirian);
                $('#id_tanggal_mulai_kegiatan').val(respon_data_umum.data.tanggal_mulai_kegiatan);
                $('#id_jangka_waktu_berdiri').val(respon_data_umum.data.jangka_waktu_berdiri);
                $('#id_bentuk_kerjasama').val(respon_data_umum.data.bentuk_kerjasama).prop('disabled', false).trigger("chosen:updated");
                $('#id_merek_dagang').val(respon_data_umum.data.merek_dagang);
                $('#id_no_merek_dagang').val(respon_data_umum.data.no_merek_dagang);
                $('#id_pemegang_hak_cipta').val(respon_data_umum.data.pemegang_hak_cipta);
                $('#id_no_hak_cipta').val(respon_data_umum.data.no_hak_cipta);
                $('#id_pemegang_hak_paten').val(respon_data_umum.data.pemegang_hak_paten);
                $('#id_no_hak_paten').val(respon_data_umum.data.no_hak_paten);
              }
              else{
                
              }
            },
            error: function(data) {
              toastr["error"]("Terjadi kesalahan pada koneksi server. Coba reload ulang browser Anda. ")
            }
        });
        $(".tab-content").mLoading('hide');
      }
    }

    function load_data_kegiatan_perusahaan(pengajuan_id){
      if (pengajuan_id !== ""){
        $(".tab-content").mLoading();
        $.ajax({
          type: 'GET',
          url: __base_url__+'/ajax-load-data-kegiatan-perusahaan-tdp/'+pengajuan_id,
            success: function (data) {
              respon_data_kegiatan = $.parseJSON(data)
              if(respon_data_kegiatan.success){
                $('#id_kegiatan_usaha_pokok').val(respon_data_kegiatan.data.kegiatan_usaha_pokok);
                $('#id_kegiatan_usaha_lain_1').val(respon_data_kegiatan.data.kegiatan_usaha_lain_1);
                $('#id_kegiatan_usaha_lain_2').val(respon_data_kegiatan.data.kegiatan_usaha_lain_2);
                $('#id_komoditi_produk_pokok').val(respon_data_kegiatan.data.komoditi_produk_pokok);
                $('#id_komoditi_produk_lain_1').val(respon_data_kegiatan.data.komoditi_produk_lain_1);
                $('#id_komoditi_produk_lain_2').val(respon_data_kegiatan.data.komoditi_produk_lain_2);
                $('#id_omset_per_tahun').val(respon_data_kegiatan.data.omset_per_tahun);
                $('#id_total_aset').val(respon_data_kegiatan.data.total_aset);
                $('#id_jumlah_karyawan_wni').val(respon_data_kegiatan.data.jumlah_karyawan_wni);
                $('#id_jumlah_karyawan_wna').val(respon_data_kegiatan.data.jumlah_karyawan_wna);
                $('#id_total_wni_wna').val(respon_data_kegiatan.data.jumlah_karyawan_wni+respon_data_kegiatan.data.jumlah_karyawan_wna);
                $('#id_kapasitas_mesin_terpasang').val(respon_data_kegiatan.data.kapasitas_mesin_terpasang);
                $('#id_satuan_kapasitas_mesin_terpasang').val(respon_data_kegiatan.data.satuan_kapasitas_mesin_terpasang);
                $('#id_kapasitas_produksi_per_tahun').val(respon_data_kegiatan.data.kapasitas_produksi_per_tahun);
                $('#id_satuan_kapasitas_produksi_per_tahun').val(respon_data_kegiatan.data.satuan_kapasitas_produksi_per_tahun);
                $('#id_presentase_kandungan_produk_lokal').val(respon_data_kegiatan.data.presentase_kandungan_produk_lokal);
                $('#id_presentase_kandungan_produk_import').val(respon_data_kegiatan.data.presentase_kandungan_produk_import);
                $('#id_kedudukan_kegiatan_usaha').val(respon_data_kegiatan.data.kedudukan_kegiatan_usaha).prop('disabled', false).trigger("chosen:updated");
                $('#id_jenis_pengecer').val(respon_data_kegiatan.data.jenis_pengecer).prop('disabled', false).trigger("chosen:updated");
                $('#id_jenis_perusahaan').val(respon_data_kegiatan.data.jenis_perusahaan).prop('disabled', false).trigger("chosen:updated");
                $('#id_modal_dasar').val(respon_data_kegiatan.data.modal_dasar);
                $('#id_modal_ditempatkan').val(respon_data_kegiatan.data.modal_ditempatkan);
                $('#id_modal_disetor').val(respon_data_kegiatan.data.modal_disetor);
                $('#id_banyaknya_saham').val(respon_data_kegiatan.data.banyaknya_saham);
                $('#id_nilai_nominal_per_saham').val(respon_data_kegiatan.data.nilai_nominal_per_saham);
              }
              else{

              }
            },
            error: function(data) {
              toastr["error"]("Terjadi kesalahan pada koneksi server. Coba reload ulang browser Anda. ")
            }
        });
        $(".tab-content").mLoading('hide');
      }
    }
</script>
{% include 'front-end/include/formulir_tdp_pt/popup/tambah_pimpinan_perusahaan.html' %}
{% include 'front-end/include/formulir_tdp_pt/popup/tambah_pemegang_saham.html' %}
{% include 'front-end/include/formulir_tdp_pt/popup/tambah_cabang.html' %}
{% include 'front-end/include/formulir_tdp_pt/popup/tambah_legalitas_lain.html' %}
{% endblock %}