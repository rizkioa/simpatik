{% load i18n admin_static staticfiles widgets %}
{% trans "Sistem Informasi Perizinan Teknologi Informasi Kediri - Kab. Kediri" as title_1 %}
<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="cache-control" content="max-age=0" />
        <!-- <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" /> -->
        <meta name="KEYWORDS" content="Perizinan Kabupaten Kediri, Kabupaten Kediri , Adisatya IT Consultant, Febri Ahmad Nurhidayat, bpmp2tsp, DPMPTSP - Kabupaten Kediri, simpatik.kedirikab.go.id" />
        <meta name="description" content="SIMPATIK merupakan sistem pelayanan perijinan online yang dilakukan oleh DPMPTSP." >
        <meta content='Adisatya IT Consultant, Febri Ahmad Nurhidayat' name='author'/>
        <title>{% block title %}SIMPATIK {% endblock %} | {{ title_1 }}</title>
        <link rel="icon" type="image/ico" href="{% static 'images/SIMPATIK.ico' %}" />
        <link rel="stylesheet" href="{% static 'styles/css/main_site.css' %}">
        <link rel="stylesheet" href="{% static 'styles/css/vendor/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'styles/css/vendor/animate.css' %}">
        <link rel="stylesheet" href="{% static 'styles/css/vendor/font-awesome.min.css' %}">
        <link rel="stylesheet" href="{% static 'scripts/js/vendor/animsition/css/animsition.min.css' %}">
        <link rel="stylesheet" href="{% static 'styles/css/mainfront.css' %}">
        <script src="{% static 'scripts/js/vendor/modernizr/modernizr-2.8.3-respond-1.4.2.min.js' %}"></script>
        <link rel="stylesheet" href="{% static 'styles/css/mobile-frontend.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'styles/css/vendor/simple-line-icons.css' %}">
        <link rel="stylesheet" href="{% static 'scripts/js/mloading/jquery.mloading.css' %}">
        <script type="text/javascript">
            lokasi = document.createElement("a");
            lokasi.href = location.href;
            window.__base_url__ = lokasi.protocol+"//"+lokasi.host;
            // alert(__base_url__)
            var pathname = window.location.pathname;
        </script>
        {% block extrastyle %}
        {% endblock %}
        <style type="text/css">
            @media only screen and (max-width: 768px) {
                .appWrapper.header-fixed.sidebar-xs #content {
                  left: 0px;
                  padding-left: 0px;
                }
                .menu-mobile{
                    display: block;
                }
                .brand{
                    padding-top: 0px;
                }
            }
            @media only screen and (min-width: 769px) {
                /*.menu-mobile{
                    display: none;
                }*/
                #content {
                  left: 0px;
                  padding-left: 0px;
                }
                .title-menu{
                    float: left;
                }
                .nav-menu{
                    float: right;
                }
                .brand{
                    padding-top: 20px;
                }
            }
            @media only screen and (max-width: 991px) {
                .appWrapper.header-fixed.sidebar-sm #content {
                  left: 80px;
                  padding-left: 0;
                }
                .title-menu{
                    float: left;
                }
                .nav-menu{
                    float: right;
                }
                .branding ,.branding-small, .scheme-black{
                    width: 100%;
                }
                .appWrapper.sidebar-sm #header .branding,
                  .appWrapper:not(.sidebar-sm):not(.sidebar-xs) #header .branding {
                    width: 100%;
                }
                .brand{
                    padding-top: 20px;
                }
                .nav-menu{
                    display: block;
                }
            }
            @media only screen and (min-width: 992px) {
                .nav-menu{
                    display: none;
                }
            }
            #content {
                  left: 0px;
                  padding-left: 0px;
                }
            .sidenav {
                height: 100%;
                width: 0;
                position: fixed;
                z-index: 1;
                top: 0;
                left: 0;
                background-color: #1c2b36;
                overflow-x: hidden;
                transition: 0.5s;
                /*padding-top: 60px;*/
            }

            .sidenav a {
                font-family: "Dosis","Arial",sans-serif;
                padding: 8px 8px 8px 32px;
                text-decoration: none;
                font-size: 20px;
                color: white;
                display: block;
                transition: 0.3s
            }

            .sidenav a:hover, .offcanvas a:focus{
                color: #f1f1f1;
            }

            .sidenav .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 36px;
                margin-left: 50px;
            }

            #wrap {
                transition: margin-left .5s;
                padding: 16px;
            }

            @media screen and (max-height: 450px) {
              .sidenav {padding-top: 15px;}
              .sidenav a {font-size: 18px;}
            }
            * {
              font-family: 'Open Sans', sans-serif;
              /*font-family: Arial, sans-serif;*/

            }
            .widget-chat{
                bottom:0;
                position:fixed;
                float:right;
                margin-left:10px;
                width: 30%;
                box-shadow: 0 12px 6px -6px #bbb;
            }
            #button-chat{
                bottom:20px;
                position:fixed;
                float:right;
                margin-left:10px;
            }
        </style>
    </head>
    <body id="minovate" class="appWrapper hz-menu device-lg header-fixed aside-fixed rightbar-hidden lightred-scheme-color scheme-light">
        <div id="mySidenav" class="sidenav">
            <!-- <a href="#">About</a> -->
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <div style="padding-top: 50px;">
                <a href="#" style="font-size: 26px;"><img src="{% static 'images/SIMPATIK.ico' %}" width="28px" /> <strong>SIMPATIK</strong></a>
                <a href="{% url 'frontindex' %}"><i class="fa fa-home"></i> Beranda</a>
                <a href="{% url 'layanan' %}"><i class="fa fa-building-o"></i> Pengajuan izin</a>
                <a href="{% url 'cari_pengajuan' %}"><i class="fa fa-search"></i> Cari Pengajuan</a>
                <a href="{% url 'admin:index' %}"><i class="fa fa-user"></i> Admin </a>
            </div>
        </div>
        <div id="wrap" class="animsition">
            <section id="header">
                <header class="clearfix">
                    <div class="branding branding-small">
                        <div style="width:100%;text-align:center;">
                            
                            <div style="float:right;width: 90%;" class="title-menu">
                                <a href="{% url 'frontindex' %}" class="brand" >
                                    <strong class="strong_title" >SIMPATIK</strong><br>
                                    <span class="font_hidden" style="font-size: 14px;">Sistem Informasi Perizinan Satu Pintu Kabupaten Kediri</span>
                                </a>
                            </div>
                            <div style="float:left;width: 10%;padding-top: 10px;" class="nav-menu">
                                <span class="menu-mobile" style="font-size:30px;cursor:pointer;color:white;" onclick="openNav()">&#9776;</span>
                            </div>
                        </div>
                        
                        <a href="#" class="offcanvas-toggle visible-xs-inline"><i class="fa fa-bars"></i></a>
                    </div>
                    {% include 'front-end/navbar.html' %}
                </header>
            </section>
            <section id="content">
                <div class="page page-hz-menu-layout">
                    {% block section %}

                    {% endblock %}
                    <a id="back-to-top" href="#" class="btn btn-darkgray btn-lg back-to-top" role="button" data-placement="left"><span class="fa fa-angle-up"></span></a>
                    
                </div>
            </section>
            {% if not request.path == "/" %}
                <section id="footer" style="position: absolute;left: 0;right: 0;bottom: 0;">
                    <div class="footer">
                        {% include 'front-end/footer.html' %}
                    </div>
                </section>

                <button id="button-chat" class="btn btn-info btn-ef btn-ef-3 btn-ef-3a mb-10"><i class="fa fa-comment"></i> Chat</button>
                <section class="tile widget-chat" id="widget-chat-login">
                    <form class="form_login_chat_room" method="POST" action="{% url 'admin:login_chat' %}">
                        <div class="tile-header dvd dvd-btm">
                            <h1 class="custom-font">Chat Login</h1>
                            <ul class="controls">
                                <li class="dropdown" style="margin-top: 4px;">
                                    <select class="form-control option-operator" style="width: 200px;" required="True">
                                    </select>
                                </li>
                                <li class="remove remove-chat"><a role="button" tabindex="0" class="tile-close"><i class="fa fa-times"></i></a></li>
                            </ul>
                        </div>
                        <div class="tile-body slim-scroll" style="max-height: 320px;overflow:auto;">
                            <div class="login_chat_room form-horizontal" id="id_login_chat_room">
                                
                                {% csrf_token %}
                                <h1 align="center">Login</h1>
                                <div class="form-group" >
                                    <div class="col-md-12">
                                        <input align="center" type="text" class="form-control" name="nomor_ktp" placeholder="Nomor KTP" required="True">
                                    </div>
                                </div>
                                <div class="form-group" >
                                    <div class="col-md-12">
                                        <input type="text" name="nama_lengkap" class="form-control" placeholder="Nama Lengkap" required="True">
                                    </div>
                                </div>
                                <button class="btn button_login" type="button" onclick="chat_room();">login</button>
                            </div>
                        </div>
                    </form>
                </section>

                <section class="tile widget-chat" id="widget-chat">
                    <!-- tile header -->
                    <div class="tile-header dvd dvd-btm">
                        <h1 class="custom-font">Chat</h1>
                        <ul class="controls">
                            <li class="dropdown" style="margin-top: 4px;">
                                <select class="form-control option-operator">
                                </select>
                            </li>
                            <li class="remove remove-chat"><a role="button" tabindex="0" class="tile-close"><i class="fa fa-times"></i></a></li>
                        </ul>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body slim-scroll" style="max-height: 320px;overflow:auto;">
                        <div class="chat">
                            <ul class="chats p-0">
                                <li class="in">
                                    <div class="media">
                                        <div class="pull-left thumb thumb-sm">
                                            <img class="media-object img-circle" src="{% static 'images/SIMPATIK.png' %}" alt="">
                                        </div>
                                        <div class="media-body">
                                            <p class="media-heading"><a role="button" tabindex="0" class="name">John Douey </a><span class="datetime">at 12.10.2014</span></p>
                                            <span class="body">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. </span>
                                        </div>
                                    </div>
                                </li>
                                <li class="out">
                                    <div class="media">
                                        <div class="pull-right thumb thumb-sm">
                                            <img class="media-object img-circle" src="{% static 'images/SIMPATIK.png' %}" alt="">
                                        </div>
                                        <div class="media-body">
                                            <p class="media-heading"><a role="button" tabindex="0" class="name">You </a><span class="datetime">2 hours ago</span></p>
                                            <span class="body">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. </span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- /tile body -->

                    <!-- tile footer -->
                    <div class="tile-footer hide">
                        <div class="chat-form">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Type your message here...">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button"><i class="fa fa-chevron-right"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- /tile footer -->

                </section>
            
            {% endif %}
        </div>
        {% block extratools %}
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
        <script src="{% static 'scripts/js/vendor/jquery/jquery-1.11.2.min.js' %}"></script>
        <!-- <script src="{% static 'scripts/js/vendor/jquery/jquery-2.1.1.min.js' %}"></script> -->
        <!-- <script src="{% static 'scripts/js/vendor/jquery/jquery-3.1.1.min.js' %}"></script> -->
        <script src="{% static 'scripts/js/vendor/bootstrap/bootstrap.min.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/jRespond/jRespond.min.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/slimscroll/jquery.slimscroll.min.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/animsition/js/jquery.animsition.min.js' %}"></script>
        <script src="{% static 'scripts/js/mainfront.js' %}"></script>
        <script src="{% static 'scripts/js/mloading/jquery.mloading.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/jquery/jquery.form.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/parsley/parsley.js' %}"></script>
        <script src="{% static 'scripts/js/vendor/toastr/toastr.min.js' %}"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $(window).scroll(function () {
                    if ($(this).scrollTop() > 50) {
                        $('#back-to-top').fadeIn();
                    } else {
                        $('#back-to-top').fadeOut();
                    }
                });
                $('#back-to-top').click(function () {
                    $('#back-to-top').tooltip('hide');
                    $('body,html').animate({
                        scrollTop: 0
                    }, 800);
                    return false;
                });                
                $('#back-to-top').tooltip('show');
            });
            $('.widget-chat').fadeOut();
            if(window.location.hostname != "localhost"){
                $('#button-chat').hide();
            }
            $(function() {

                $('#button-chat').on('click', function() {
                    // alert(this.id);
                    // $('#widget-chat-login').fadeIn();
                    // $('#button-chat').hide();
                    if (localStorage.getItem('chat_no_ktp') == null && localStorage.getItem('chat_nama_pemohon') == null){
                        $('#widget-chat-login').fadeIn();
                        $('#button-chat').hide();
                    }else{
                       $('#widget-chat').fadeIn();
                        $('#button-chat').hide(); 
                    }
                });

                $('.remove-chat').on('click', function() {
                    // alert(this.id);
                    $('#widget-chat').fadeOut();
                    $('#button-chat').show();
                });

            });
            option_operator()
            function option_operator(){
                $.ajax({
                    url:__base_url__+'/admin/kepegawaian/pegawai/option-operator/',
                    type: 'GET',
                    success: function(response){
                        // console.log(response)
                        // respon = JSON.parse(response)

                        // console.log(response)
                        $('.option-operator').html(response)

                        // $.each( respon, function( index ) {
                        //     console.log(respon[index].nama_lengkap)
                        // })
                    }
                })
            }
        </script>
        {% endblock %}
        <script type="text/javascript">
            // ( function() {
            //     if ( 'serviceWorker' in navigator ) {
            //         // /static/scripts/js/service-worker.js
            //         navigator.serviceWorker.register( '{% static 'scripts/js/service-worker.js' %}' ).then( function() {
            //            console.log( 'Service Worker Registered' );
            //         } );
            //     }
            // } )();
            if('serviceWorker' in navigator) {
                navigator.serviceWorker
                    .register('{% static 'scripts/js/sw.js' %}')
                    .then(function() { console.log("Service Worker Registered"); });
            }

            if(window.location.hostname != 'localhost'){
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-87576217-2', 'auto');
                ga('send', 'pageview');
            }

            function toast_server_error(msg_){
                toastr.options = {
                  "closeButton": true,
                  "debug": false,
                  "newestOnTop": false,
                  "progressBar": false,
                  "positionClass": "toast-top-right",
                  "preventDuplicates": false,
                  "onclick": null,
                  "showDuration": "300",
                  "hideDuration": "1000",
                  "timeOut": "5000",
                  "extendedTimeOut": "1000",
                  "showEasing": "swing",
                  "hideEasing": "linear",
                  "showMethod": "fadeIn",
                  "hideMethod": "fadeOut"
                }
                if(typeof msg_ == "undefined"){
                    toastr["error"]("Terjadi kesalahan pada koneksi server.")
                }
                else{
                    toastr["error"](msg_)
                }
            }
            
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
                document.getElementById("wrap").style.marginLeft = "250px";
                $('#header').hide()
                $("#wrap").mLoading();
                $("#footer, .footer").mLoading();
                $(".mloading-bar").hide();
            }

            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
                document.getElementById("wrap").style.marginLeft= "0";
                $('#header').show()
                $("#wrap").mLoading('hide');
                $("#footer, .footer").mLoading('hide');

            }

            $.ajaxSetup({
                timeout: 10000, // Microseconds, for the laughs. Guaranteed timeout.
                error: function(request, status, maybe_an_exception_object) {
                    if(status == 'timeout'){
                        toast_server_error()
                    }
                }
            });


            // function addStorage() {
            //     var nomor_ktp = document.getElementById('nomor_ktp');
            //     var nama_lengkap = document.getElementById('nama_lengkap');


            //     //localStorage setItem
            //     if ("localStorage" in window) {
            //         localStorage.setItem(nomor_ktp.value, nama_lengkap.value);
            //     } else {
            //         alert("no localStorage in window");
            //     }
            // }

            function chat_room(){
                frm = $('.form_login_chat_room')
                frm.parsley().validate();
                if (frm.parsley().isValid()){
                    frm.ajaxSubmit({
                        method: 'POST',
                        data: frm.serialize(),
                        url: frm.attr('action'),
                        beforeSend: function() {
                            frm.mLoading();
                        },
                        success: function(response){
                            respon = JSON.parse(response)
                            if(respon.success == true){
                                toastr["success"](respon.pesan)
                                // ketika berhasil simpan localstorage
                                
                            }
                            else{
                                toastr['error'](respon.pesan)
                            }
                            frm.mLoading('hide')
                        },
                        error: function(){
                            frm.mLoading('hide')
                            // toastr_server_error();
                        }
                    })
                }
            }

        </script>
    </body>
</html>